# Network Config PackageVariant for my-ran cluster
# Deploys N2/N3/N4/N6 NADs for OAI RAN workloads

apiVersion: config.porch.kpt.dev/v1alpha1
kind: PackageVariant
metadata:
  name: network-config-my-ran
  namespace: default
  labels:
    nephio.org/cluster: my-ran
    nephio.org/purpose: networking
spec:
  upstream:
    repo: nephio-blueprints-approachb
    package: networking/network-config
  downstream:
    repo: nephio-my-ran
    package: network-config
  pipeline:
    mutators:
      - image: gcr.io/kpt-fn/apply-setters:v0.2
        configMap:
          # Target namespace (must exist in cluster-baseline)
          target-namespace: openairinterface

          # Physical interface on my-ran worker nodes
          master-interface: eth0

          # N2 Network (gNB <-> AMF signaling)
          n2-subnet: "192.168.10.0/24"
          n2-gateway: "192.168.10.1"
          n2-range-start: "192.168.10.10"
          n2-range-end: "192.168.10.250"

          # N3 Network (gNB <-> UPF user data)
          n3-subnet: "192.168.11.0/24"
          n3-gateway: "192.168.11.1"
          n3-range-start: "192.168.11.10"
          n3-range-end: "192.168.11.250"

          # N4 Network (SMF <-> UPF control)
          n4-subnet: "192.168.12.0/24"
          n4-gateway: "192.168.12.1"
          n4-range-start: "192.168.12.10"
          n4-range-end: "192.168.12.250"

          # N6 Network (UPF <-> Data Network)
          n6-subnet: "192.168.13.0/24"
          n6-gateway: "192.168.13.1"
          n6-range-start: "192.168.13.10"
          n6-range-end: "192.168.13.250"
